<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iOS Glow Effect Demo</title>
    <style>
        :root {
            --phone-width: 360px;
            --phone-height: 720px;
            --phone-radius: 50px;
            --bezel-width: 12px;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
        }

        /* --- iPhone Mockup Chassis --- */
        .iphone-chassis {
            position: relative;
            width: var(--phone-width);
            height: var(--phone-height);
            border-radius: var(--phone-radius);
            background-color: #000;
            /* The physical bezel of the phone */
            box-shadow: 
                0 0 0 6px #333, /* Outer shiny frame */
                0 0 0 7px #000, /* Separation */
                0 20px 50px rgba(0,0,0,0.5); /* Drop shadow */
            z-index: 1;
            /* Ensure content doesn't spill out of the rounded corners */
            overflow: hidden; 
        }

        /* Container for the Glow Effects - Pushed behind UI but above black bg */
        #glow-container {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 10; /* Behind UI, Above Background */
            pointer-events: none;
        }

        /* --- The Actual Glow Logic (Adapted from your code) --- */
        .effect-layer {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none;
        }

        .ring-container {
            position: relative;
            width: 100%;
            height: 100%;
            /* Matches the phone radius perfectly */
            border-radius: var(--phone-radius);
        }

        .gradient-buffer {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: var(--phone-radius);
            background-repeat: no-repeat;
            /* Mask logic to create the border stroke */
            -webkit-mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            mask: 
                linear-gradient(#fff 0 0) content-box, 
                linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            transition-property: opacity;
            will-change: opacity;
        }

        /* --- On-Screen UI Elements --- */
        .ui-layer {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 20; /* Sits on top of the glow */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Changed from space-between to start from top */
            align-items: center;
            padding: 20px;
            color: white;
            pointer-events: none;
        }

        /* Dynamic Island */
        .dynamic-island {
            width: 120px;
            height: 35px;
            background-color: black;
            border-radius: 20px;
            margin-top: 8px;
            z-index: 30;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }
        
        /* Simulating the camera/sensors inside the island */
        .island-sensors {
            width: 40%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
        }
        .island-dot {
            width: 8px;
            height: 8px;
            background: #1a1a1a;
            border-radius: 50%;
            box-shadow: 0 0 2px rgba(255,255,255,0.1);
        }

        /* Wallpaper / Content background */
        .wallpaper {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(180deg, #000000 0%, #1a1a1a 100%);
            z-index: 0;
            opacity: 0.9; /* Slightly transparent so glow pops */
        }

        /* New Container for Date and Time grouping */
        .lock-header {
            margin-top: 35px; /* Space below Dynamic Island */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .date {
            font-size: 1.3rem;
            font-weight: 500;
            color: rgba(255,255,255,0.85);
            margin-bottom: 0; /* Sit directly on top of time */
        }

        .time {
            font-size: 5.8rem;
            font-weight: 600;
            line-height: 1;
            margin: 0;
            color: rgba(255,255,255,1);
            letter-spacing: -1px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .bottom-bar {
            width: 130px;
            height: 5px;
            background-color: rgba(255,255,255,0.5);
            border-radius: 10px;
            margin-bottom: 8px;
            margin-top: auto; /* Pushes bar to the very bottom */
        }

        .helper-text {
            position: absolute;
            bottom: -50px;
            color: #666;
            font-size: 0.9rem;
        }

    </style>
</head>
<body>

    <div class="iphone-chassis">
        <!-- 1. Background -->
        <div class="wallpaper"></div>

        <!-- 2. The Glow Effects Go Here -->
        <div id="glow-container"></div>

        <!-- 3. The UI (Island, Time, etc) -->
        <div class="ui-layer">
            <div class="dynamic-island">
                <div class="island-sensors">
                    <div class="island-dot"></div>
                </div>
            </div>
            
            <div class="lock-header">
                <div class="date">Monday, June 10</div>
                <div class="time" id="clock">09:41</div>
            </div>

            <div class="bottom-bar"></div>
        </div>
    </div>

    <div class="helper-text">CSS + JS Re-creation of Apple Intelligence Glow</div>

<script>
    // --- CLOCK LOGIC (Just for demo feel) ---
    function updateClock() {
        const now = new Date();
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        document.getElementById('clock').innerText = `${hours}:${minutes}`;
    }
    setInterval(updateClock, 1000);
    updateClock();


    // --- GLOW LOGIC (Unchanged mostly, just targeted correctly) ---
    
    const COLORS = [
        "#BC82F3", "#F5B9EA", "#8D9FFF", 
        "#FF6778", "#FFBA71", "#C686FF"
    ];

    function generateConicGradientString() {
        let stops = COLORS.map(color => ({
            color: color,
            location: Math.random() * 100
        }));

        stops.sort((a, b) => a.location - b.location);
        const stopStrings = stops.map(s => `${s.color} ${s.location.toFixed(2)}%`);
        return `conic-gradient(from 0deg, ${stopStrings.join(', ')})`;
    }

    class GlowRing {
        constructor(container, config) {
            this.width = config.width;
            this.blur = config.blur;
            this.interval = config.interval * 1000;
            this.duration = config.duration;

            this.el = document.createElement('div');
            this.el.className = 'effect-layer';
            
            if (this.blur > 0) {
                this.el.style.filter = `blur(${this.blur}px)`;
            }

            const ring = document.createElement('div');
            ring.className = 'ring-container';
            
            this.buffer1 = this.createBuffer();
            this.buffer2 = this.createBuffer();
            this.activeBuffer = 1;
            
            this.setGradient(this.buffer1, generateConicGradientString());
            this.buffer1.style.opacity = 1;
            this.buffer2.style.opacity = 0;

            ring.appendChild(this.buffer1);
            ring.appendChild(this.buffer2);
            this.el.appendChild(ring);
            container.appendChild(this.el);

            this.startTimer();
        }

        createBuffer() {
            const div = document.createElement('div');
            div.className = 'gradient-buffer';
            // Important: Matches CSS padding to create the "stroke"
            div.style.padding = `${this.width}px`; 
            div.style.transitionDuration = `${this.duration}s`;
            div.style.transitionTimingFunction = 'ease-in-out';
            return div;
        }

        setGradient(element, gradientString) {
            element.style.backgroundImage = gradientString;
        }

        startTimer() {
            setInterval(() => {
                this.animate();
            }, this.interval);
        }

        animate() {
            const newGradient = generateConicGradientString();
            
            if (this.activeBuffer === 1) {
                this.setGradient(this.buffer2, newGradient);
                this.buffer2.style.opacity = 1;
                this.buffer1.style.opacity = 0;
                this.activeBuffer = 2;
            } else {
                this.setGradient(this.buffer1, newGradient);
                this.buffer1.style.opacity = 1;
                this.buffer2.style.opacity = 0;
                this.activeBuffer = 1;
            }
        }
    }

    // --- INIT ---
    const glowContainer = document.getElementById('glow-container');

    // We adjust the widths slightly for the smaller mobile frame
    // 1. Sharp inner edge
    new GlowRing(glowContainer, { width: 5, blur: 0, interval: 0.4, duration: 0.5 });

    // 2. Main visible body
    new GlowRing(glowContainer, { width: 8, blur: 5, interval: 0.4, duration: 0.6 });

    // 3. Outer soft glow
    new GlowRing(glowContainer, { width: 10, blur: 15, interval: 0.4, duration: 0.8 });

    // 4. Wide ambiance
    new GlowRing(glowContainer, { width: 15, blur: 25, interval: 0.5, duration: 1.0 });

</script>
</body>
</html>